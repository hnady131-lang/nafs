<!doctype html>
<html lang="ar" dir="rtl">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù†Ø§ÙØ³ - Ø·Ù…ÙˆØ­ ÙˆØ·Ù† ÙˆØªÙ…ÙŠØ² Ø¬ÙŠÙ„</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap');
    * { font-family: 'Tajawal', sans-serif; }
    html, body { height: 100%; }
    .slide-in { animation: slideIn 0.5s ease-out; }
    @keyframes slideIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    .option-hover:hover { background-color: #fdf2f8; border-color: #ec4899; transform: scale(1.01); }
    .ranking-item { display: flex; align-items: center; padding: 12px; background: white; border-radius: 12px; border-right: 5px solid #a78bfa; margin-bottom: 8px; }
  </style>
 </head>
 <body class="bg-gradient-to-b from-indigo-100 via-purple-50 to-pink-100 h-full m-0 p-0 text-right">
  
  <div id="app" class="w-full h-full overflow-auto">
    <div id="mainContent" class="min-h-full flex flex-col">
      <header class="bg-gradient-to-l from-emerald-500 to-teal-600 text-white shadow-xl p-4 sticky top-0 z-50">
        <div class="max-w-2xl mx-auto">
          <div class="bg-white/20 rounded-xl p-3 backdrop-blur-md mb-3 text-center slide-in">
            <p class="text-sm font-bold leading-relaxed">ğŸ¯ "Ù‡Ø¯ÙÙ†Ø§ Ø£Ù† ÙŠØ­ØµÙ„ ÙƒÙ„ Ø·ÙÙ„ Ø³Ø¹ÙˆØ¯ÙŠ Ø¹Ù„Ù‰ ÙØ±Øµ Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¬ÙŠØ¯ ÙˆÙÙ‚ Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø©"<br>
            <span class="text-xs opacity-90">Ø³Ù…Ùˆ ÙˆÙ„ÙŠ Ø§Ù„Ø¹Ù‡Ø¯ Ø§Ù„Ø£Ù…ÙŠØ± Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø³Ù„Ù…Ø§Ù† Ø­ÙØ¸Ù‡ Ø§Ù„Ù„Ù‡</span></p>
          </div>
          <h1 id="appTitle" class="text-2xl font-black text-center mb-2">Ù†Ø§ÙØ³ - Ø·Ù…ÙˆØ­ ÙˆØ·Ù†</h1>
          <p class="text-center text-sm font-bold bg-black/10 rounded-full py-1">Ø§Ù„Ù…Ø¹Ù„Ù…Ø©: <span id="teacherName" class="text-yellow-300">Ù‡Ù†Ø§Ø¯ÙŠ Ø®Ù„Ù Ø§Ù„Ø³Ù„Ù…ÙŠ</span></p>
          
          <div class="grid grid-cols-3 gap-2 mt-4">
            <div class="bg-white/10 rounded-lg p-2 text-center">
              <p class="text-[10px] uppercase">Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª</p>
              <p id="visitCount" class="text-xl font-black">0</p>
            </div>
            <div class="bg-white/10 rounded-lg p-2 text-center">
              <p class="text-[10px] uppercase">Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù†Ù‚Ø§Ø·Ø§Ù‹</p>
              <p id="lastVisitor" class="text-xs font-bold truncate">-</p>
            </div>
            <div class="bg-white/10 rounded-lg p-2 text-center">
              <p class="text-[10px] uppercase">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ø¬ÙˆÙ…</p>
              <p id="totalStars" class="text-xl font-black">0</p>
            </div>
          </div>
        </div>
      </header>

      <main class="flex-1 p-4">
        <div class="max-w-2xl mx-auto">
          
          <section id="homeScreen" class="slide-in">
            <div class="bg-white rounded-3xl shadow-xl p-6 border-b-8 border-purple-400 mb-6">
              <h2 class="text-2xl font-black text-purple-800 text-center mb-4">ğŸ® Ø§Ø³ØªØ¹Ø¯ Ù„Ù„ØªØ­Ø¯ÙŠ!</h2>
              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-bold text-gray-600 mb-1 mr-1">Ø§Ø³Ù… Ø§Ù„Ø¨Ø·Ù„:</label>
                  <input id="studentNameInput" type="text" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ..." class="w-full px-4 py-3 rounded-2xl border-2 border-purple-100 focus:border-purple-500 outline-none text-lg font-bold">
                </div>
                <button id="btnStartQuiz" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-4 rounded-2xl font-black text-xl transition-transform active:scale-95 shadow-lg">Ø§Ù†Ø·Ù„Ù‚ Ø§Ù„Ø¢Ù†! ğŸš€</button>
              </div>
            </div>

            <div id="quizSelection" class="hidden space-y-4">
              <h3 class="text-center font-black text-purple-900 text-xl py-2">Ø§Ø®ØªØ± Ù…Ø¬Ø§Ù„Ùƒ Ø§Ù„Ù…ÙØ¶Ù„:</h3>
              <div id="domainGrid" class="grid grid-cols-1 gap-4 pb-10">
                <div class="bg-emerald-50 p-4 rounded-2xl border-2 border-emerald-200">
                  <h4 class="font-black text-emerald-700 mb-3">ğŸ”¢ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ ÙˆØ§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</h4>
                  <div class="flex gap-2">
                    <button class="quizBtn flex-1 bg-emerald-500 text-white py-2 rounded-xl text-sm font-bold" data-domain="numbers" data-level="Ù…Ø¨ØªØ¯Ø¦">Ù…Ø¨ØªØ¯Ø¦</button>
                    <button class="quizBtn flex-1 bg-emerald-600 text-white py-2 rounded-xl text-sm font-bold" data-domain="numbers" data-level="Ù…ØªÙˆØ³Ø·">Ù…ØªÙˆØ³Ø·</button>
                    <button class="quizBtn flex-1 bg-emerald-700 text-white py-2 rounded-xl text-sm font-bold" data-domain="numbers" data-level="Ù…ØªÙ‚Ø¯Ù…">Ù…ØªÙ‚Ø¯Ù…</button>
                  </div>
                </div>
                <div class="bg-blue-50 p-4 rounded-2xl border-2 border-blue-200">
                  <h4 class="font-black text-blue-700 mb-3">ğŸ“ Ø§Ù„Ø¬Ø¨Ø± ÙˆØ§Ù„Ø£Ù†Ù…Ø§Ø·</h4>
                  <div class="flex gap-2">
                    <button class="quizBtn flex-1 bg-blue-500 text-white py-2 rounded-xl text-sm font-bold" data-domain="algebra" data-level="Ù…Ø¨ØªØ¯Ø¦">Ù…Ø¨ØªØ¯Ø¦</button>
                    <button class="quizBtn flex-1 bg-blue-600 text-white py-2 rounded-xl text-sm font-bold" data-domain="algebra" data-level="Ù…ØªÙˆØ³Ø·">Ù…ØªÙˆØ³Ø·</button>
                    <button class="quizBtn flex-1 bg-blue-700 text-white py-2 rounded-xl text-sm font-bold" data-domain="algebra" data-level="Ù…ØªÙ‚Ø¯Ù…">Ù…ØªÙ‚Ø¯Ù…</button>
                  </div>
                </div>
                <div class="bg-orange-50 p-4 rounded-2xl border-2 border-orange-200">
                  <h4 class="font-black text-orange-700 mb-3">ğŸ“ Ø§Ù„Ù‡Ù†Ø¯Ø³Ø© ÙˆØ§Ù„Ù‚ÙŠØ§Ø³</h4>
                  <div class="flex gap-2">
                    <button class="quizBtn flex-1 bg-orange-500 text-white py-2 rounded-xl text-sm font-bold" data-domain="geometry" data-level="Ù…Ø¨ØªØ¯Ø¦">Ù…Ø¨ØªØ¯Ø¦</button>
                    <button class="quizBtn flex-1 bg-orange-600 text-white py-2 rounded-xl text-sm font-bold" data-domain="geometry" data-level="Ù…ØªÙˆØ³Ø·">Ù…ØªÙˆØ³Ø·</button>
                    <button class="quizBtn flex-1 bg-orange-700 text-white py-2 rounded-xl text-sm font-bold" data-domain="geometry" data-level="Ù…ØªÙ‚Ø¯Ù…">Ù…ØªÙ‚Ø¯Ù…</button>
                  </div>
                </div>
                <div class="bg-violet-50 p-4 rounded-2xl border-2 border-violet-200">
                    <h4 class="font-black text-violet-700 mb-3">ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¡ ÙˆØ§Ù„Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª</h4>
                    <div class="flex gap-2">
                      <button class="quizBtn flex-1 bg-violet-500 text-white py-2 rounded-xl text-sm font-bold" data-domain="stats" data-level="Ù…Ø¨ØªØ¯Ø¦">Ù…Ø¨ØªØ¯Ø¦</button>
                      <button class="quizBtn flex-1 bg-violet-600 text-white py-2 rounded-xl text-sm font-bold" data-domain="stats" data-level="Ù…ØªÙˆØ³Ø·">Ù…ØªÙˆØ³Ø·</button>
                      <button class="quizBtn flex-1 bg-violet-700 text-white py-2 rounded-xl text-sm font-bold" data-domain="stats" data-level="Ù…ØªÙ‚Ø¯Ù…">Ù…ØªÙ‚Ø¯Ù…</button>
                    </div>
                </div>
              </div>
            </div>

            <div id="leaderboardSection" class="mt-8 bg-white/60 backdrop-blur-sm rounded-3xl p-6 border-2 border-purple-200">
              <h3 class="text-xl font-black text-center text-purple-900 mb-4">ğŸ† Ù„ÙˆØ­Ø© Ø§Ù„ØµØ¯Ø§Ø±Ø©</h3>
              <div id="allStudentsRanking" class="space-y-2">
                <p class="text-center text-gray-500 italic">Ø³Ø¬Ù„ Ù†ØªÙŠØ¬ØªÙƒ Ø§Ù„Ø¢Ù†!</p>
              </div>
            </div>
          </section>

          <section id="quizScreen" class="hidden slide-in pb-10">
            <div class="flex items-center justify-between mb-4">
              <h2 id="quizTitle" class="font-black text-purple-800 text-lg"></h2>
              <button id="btnBackToSelection" class="text-sm font-bold text-red-500 underline">Ø§Ù†Ø³Ø­Ø§Ø¨</button>
            </div>
            <div id="questionsContainer" class="space-y-6"></div>
            <button id="btnSubmitQuiz" class="w-full mt-8 bg-emerald-600 text-white py-4 rounded-2xl font-black text-xl shadow-lg border-b-4 border-emerald-800 active:scale-95 transition-transform">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª âœ…</button>
          </section>

          <section id="resultsScreen" class="hidden slide-in text-center">
            <div class="bg-white rounded-3xl shadow-2xl p-8 border-t-8 border-yellow-400">
              <div id="resultEmoji" class="text-7xl mb-4">ğŸŒŸ</div>
              <h2 class="text-3xl font-black text-purple-900 mb-2">Ø£Ø­Ø³Ù†Øª ÙŠØ§ Ø¨Ø·Ù„!</h2>
              <p id="resultName" class="text-xl font-bold text-purple-600 mb-6"></p>
              
              <div class="grid grid-cols-2 gap-4 mb-8">
                <div class="bg-purple-50 p-4 rounded-2xl">
                  <p class="text-xs text-gray-500 font-bold mb-1">Ø§Ù„Ù†ØªÙŠØ¬Ø©</p>
                  <p id="scoreDisplay" class="text-3xl font-black text-purple-700"></p>
                </div>
                <div class="bg-yellow-50 p-4 rounded-2xl">
                  <p class="text-xs text-gray-500 font-bold mb-1">Ø§Ù„Ù†Ø¬ÙˆÙ…</p>
                  <div id="starsDisplay" class="text-2xl"></div>
                </div>
              </div>

              <div class="space-y-3">
                <button id="btnTakeAnother" class="w-full bg-purple-600 text-white py-3 rounded-xl font-bold">ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯ ğŸ”„</button>
                <button id="btnBackHome" class="w-full bg-gray-100 text-gray-600 py-3 rounded-xl font-bold">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ğŸ </button>
              </div>
            </div>
          </section>
        </div>
      </main>
    </div>
  </div>

  <script>
const questions = {
      numbers: {
        Ù…Ø¨ØªØ¯Ø¦: [
          { q: "ÙÙŠ Ø­ØµØ§Ù„Ø© Ø­Ù…Ø¯ Ù¥Ù§Ù¢ Ø±ÙŠØ§Ù„Ø§Ù‹. Ø£ÙŠ Ø±Ù‚Ù… Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙŠÙ‚Ø¹ ÙÙŠ Ù…Ù†Ø²Ù„Ø© 'Ø§Ù„Ù…Ø¦Ø§Øª'ØŸ", options: ["Ø§Ù„Ø±Ù‚Ù… Ù§", "Ø§Ù„Ø±Ù‚Ù… Ù¢", "Ø§Ù„Ø±Ù‚Ù… Ù¥", "Ù„Ø§ ÙŠÙˆØ¬Ø¯"], correct: 2 },
          { q: "ÙƒØªØ¨Øª Ø§Ù„Ù…Ø¹Ù„Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¨ÙˆØ±Ø© (Ø£Ø±Ø¨Ø¹Ù…Ø§Ø¦Ø© ÙˆØ§Ø«Ù†ÙŠÙ†). ÙƒÙŠÙ ÙŠÙƒØªØ¨ Ø¨Ø·Ù„ Ø§Ù„ØµÙ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø¯Ø¯ Ø¨Ø§Ù„Ø£Ø±Ù‚Ø§Ù…ØŸ", options: ["Ù¤Ù¢", "Ù¤Ù Ù¢", "Ù¤Ù¢Ù ", "Ù¢Ù Ù¤"], correct: 1 },
          { q: "Ù‚Ø·Ù Ù…Ø²Ø§Ø±Ø¹ Ù£Ù¢ ØªÙØ§Ø­Ø© Ø­Ù…Ø±Ø§Ø¡ Ùˆ Ù¡Ù¥ ØªÙØ§Ø­Ø© Ø®Ø¶Ø±Ø§Ø¡. ÙƒÙ… ØªÙØ§Ø­Ø© Ù‚Ø·Ù Ø§Ù„Ù…Ø²Ø§Ø±Ø¹ Ù…Ø¹Ø§Ù‹ØŸ", options: ["Ù¤Ù§ ØªÙØ§Ø­Ø©", "Ù¥Ù§ ØªÙØ§Ø­Ø©", "Ù£Ù§ ØªÙØ§Ø­Ø©", "Ù¤Ù¥ ØªÙØ§Ø­Ø©"], correct: 0 },
          { q: "ØªØ±ÙŠØ¯ Ù„ÙŠÙ„Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø±Ù‚Ù… Ø­Ø¸ ÙØ±Ø¯ÙŠ Ù„ÙƒØ±Ø³ÙŠÙ‡Ø§ ÙÙŠ Ø§Ù„Ø­Ø§ÙÙ„Ø©. Ø£ÙŠ Ø±Ù‚Ù… Ø³ØªØ®ØªØ§Ø±ØŸ", options: ["Ù¡Ù ", "Ù¡Ù¥", "Ù¢Ù¢", "Ù£Ù¨"], correct: 1 },
          { q: "Ù„Ø¯Ù‰ Ø®Ø§Ù„Ø¯ Ù¥ ØµÙ†Ø§Ø¯ÙŠÙ‚ØŒ ÙÙŠ ÙƒÙ„ ØµÙ†Ø¯ÙˆÙ‚ Ù£ ÙƒØ±Ø§Øª. Ù…Ø§ Ù‡Ùˆ Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒØ±Ø§Øª Ø§Ù„ØªÙŠ ÙŠÙ…Ù„ÙƒÙ‡Ø§ØŸ", options: ["Ù¨ ÙƒØ±Ø§Øª", "Ù¡Ù  ÙƒØ±Ø§Øª", "Ù¡Ù¥ ÙƒØ±Ø©", "Ù¢Ù  ÙƒØ±Ø©"], correct: 2 }
        ],
        Ù…ØªÙˆØ³Ø·: [
          { q: "Ø§Ø´ØªØ±Øª Ù…Ø¯Ø±Ø³Ø© Ù§Ù¨Ù© ÙƒØªØ§Ø¨Ø§Ù‹ØŒ ÙˆØ§Ø´ØªØ±Øª Ù…Ø¯Ø±Ø³Ø© Ø£Ø®Ø±Ù‰ Ù¨Ù§Ù© ÙƒØªØ§Ø¨Ø§Ù‹. Ø£ÙŠ Ø§Ù„Ù…Ø¯Ø±Ø³ØªÙŠÙ† Ø§Ø´ØªØ±Øª 'Ø£Ù‚Ù„'ØŸ", options: ["Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰", "Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©", "Ø§Ù„Ù…Ø¯Ø±Ø³ØªØ§Ù† Ù…ØªØ³Ø§ÙˆÙŠØªØ§Ù†", "Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ù…Ø¹Ø±ÙØ©"], correct: 0 },
          { q: "ÙƒØ§Ù† ÙÙŠ Ø§Ù„Ù…ØªØ¬Ø± Ù¡Ù Ù  Ø¹Ù„Ø¨Ø© Ø¹ØµÙŠØ±ØŒ Ø¨ÙŠØ¹ Ù…Ù†Ù‡Ø§ Ù¤Ù¥ Ø¹Ù„Ø¨Ø©. ÙƒÙ… Ø¹Ù„Ø¨Ø© Ø¨Ù‚ÙŠØª ÙÙŠ Ø§Ù„Ù…ØªØ¬Ø±ØŸ", options: ["Ù¦Ù¥ Ø¹Ù„Ø¨Ø©", "Ù¥Ù¥ Ø¹Ù„Ø¨Ø©", "Ù¤Ù¥ Ø¹Ù„Ø¨Ø©", "Ù§Ù¥ Ø¹Ù„Ø¨Ø©"], correct: 1 },
          { q: "ÙŠÙ‚ÙØ² Ø£Ø±Ù†Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…: Ù¥ØŒ Ø«Ù… Ù¡Ù ØŒ Ø«Ù… Ù¡Ù¥.. Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø°ÙŠ Ø³ÙŠÙ‚ÙØ² Ø¹Ù„ÙŠÙ‡ ÙÙŠ Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©ØŸ", options: ["Ù¡Ù¦", "Ù¢Ù ", "Ù¢Ù¥", "Ù£Ù "], correct: 1 },
          { q: "ÙˆØ²Ø¹Øª Ø§Ù„Ø£Ù… Ù¡Ù¢ Ù‚Ø·Ø¹Ø© Ø­Ù„ÙˆÙ‰ Ø¹Ù„Ù‰ Ø£Ø¨Ù†Ø§Ø¦Ù‡Ø§ Ø§Ù„Ø«Ù„Ø§Ø«Ø© Ø¨Ø§Ù„ØªØ³Ø§ÙˆÙŠ. ÙƒÙ… Ù‚Ø·Ø¹Ø© Ø£Ø®Ø° ÙƒÙ„ Ø§Ø¨Ù†ØŸ", options: ["Ù£ Ù‚Ø·Ø¹", "Ù¤ Ù‚Ø·Ø¹", "Ù¥ Ù‚Ø·Ø¹", "Ù¦ Ù‚Ø·Ø¹"], correct: 1 },
          { q: "Ù‚Ø±Ø¨ Ø§Ù„ØµÙŠØ§Ø¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù…Ø§Ùƒ Ø§Ù„ØªÙŠ ØµØ§Ø¯Ù‡Ø§ (Ù¦Ù§ Ø³Ù…ÙƒØ©) Ø¥Ù„Ù‰ Ø£Ù‚Ø±Ø¨ 'Ø¹Ø´Ø±Ø©'. ÙƒÙ… ÙŠØµØ¨Ø­ Ø§Ù„Ø¹Ø¯Ø¯ØŸ", options: ["Ù¦Ù ", "Ù¦Ù¥", "Ù§Ù ", "Ù¨Ù "], correct: 2 }
        ],
        Ù…ØªÙ‚Ø¯Ù…: [
          { q: "Ø±ØªØ¨Øª Ù†ÙˆØ±Ø© ØµÙˆØ±Ù‡Ø§ ÙÙŠ Ù§ ØµÙØ­Ø§ØªØŒ ÙÙŠ ÙƒÙ„ ØµÙØ­Ø© Ù¨ ØµÙˆØ±. ÙƒÙ… ØµÙˆØ±Ø© Ù„Ø¯Ù‰ Ù†ÙˆØ±Ø©ØŸ", options: ["Ù¥Ù¤ ØµÙˆØ±Ø©", "Ù¥Ù¦ ØµÙˆØ±Ø©", "Ù¦Ù¤ ØµÙˆØ±Ø©", "Ù¤Ù© ØµÙˆØ±Ø©"], correct: 1 },
          { q: "Ø£ÙƒÙ„Øª Ø£Ù…Ù„ Ø±Ø¨Ø¹ (Ù¡/Ù¤) Ù‚Ø·Ø¹Ø© Ø§Ù„Ø¨ÙŠØªØ²Ø§. Ø£ÙŠ Ø´ÙƒÙ„ Ù…Ù† Ø§Ù„Ø£Ø´ÙƒØ§Ù„ Ø§Ù„ØªØ§Ù„ÙŠØ© ÙŠÙ…Ø«Ù„ Ù…Ø§ Ø£ÙƒÙ„ØªÙ‡ Ø£Ù…Ù„ØŸ", options: ["Ø¬Ø²Ø¡ ÙˆØ§Ø­Ø¯ Ù…Ù† Ø¬Ø²Ø¡ÙŠÙ†", "Ø¬Ø²Ø¡ ÙˆØ§Ø­Ø¯ Ù…Ù† Ù£ Ø£Ø¬Ø²Ø§Ø¡", "Ø¬Ø²Ø¡ ÙˆØ§Ø­Ø¯ Ù…Ù† Ù¤ Ø£Ø¬Ø²Ø§Ø¡", "Ø¬Ø²Ø¡Ø§Ù† Ù…Ù† Ù¤ Ø£Ø¬Ø²Ø§Ø¡"], correct: 2 },
          { q: "ÙŠØ±ÙŠØ¯ Ø§Ù„Ù…Ø¹Ù„Ù… ØªÙ‚Ø³ÙŠÙ… Ù¢Ù  Ø·Ø§Ù„Ø¨Ø§Ù‹ Ø¥Ù„Ù‰ Ù¤ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ù…ØªØ³Ø§ÙˆÙŠØ©. ÙƒÙ… Ø·Ø§Ù„Ø¨Ø§Ù‹ ÙÙŠ ÙƒÙ„ Ù…Ø¬Ù…ÙˆØ¹Ø©ØŸ", options: ["Ù¤ Ø·Ù„Ø§Ø¨", "Ù¥ Ø·Ù„Ø§Ø¨", "Ù¦ Ø·Ù„Ø§Ø¨", "Ù¡Ù  Ø·Ù„Ø§Ø¨"], correct: 1 },
          { q: "Ù…Ø¹ Ù…Ø­Ù…Ø¯ Ù¥Ù  Ø±ÙŠØ§Ù„Ø§Ù‹ØŒ Ø§Ø´ØªØ±Ù‰ Ù‚ØµØ© Ø¨Ù€ Ù¡Ù¥ Ø±ÙŠØ§Ù„Ø§Ù‹ ÙˆØ¹Ù„Ø¨Ø© Ø£Ù„ÙˆØ§Ù† Ø¨Ù€ Ù¡Ù  Ø±ÙŠØ§Ù„Ø§Øª. ÙƒÙ… Ø±ÙŠØ§Ù„Ø§Ù‹ Ø¨Ù‚ÙŠ ÙÙŠ Ø¬ÙŠØ¨Ù‡ØŸ", options: ["Ù¡Ù¥ Ø±ÙŠØ§Ù„Ø§Ù‹", "Ù¢Ù  Ø±ÙŠØ§Ù„Ø§Ù‹", "Ù¢Ù¥ Ø±ÙŠØ§Ù„Ø§Ù‹", "Ù£Ù  Ø±ÙŠØ§Ù„Ø§Ù‹"], correct: 2 },
          { q: "Ø£ÙŠ Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ù‚Ù… Ù£ ÙÙŠ Ù…Ù†Ø²Ù„Ø© 'Ø§Ù„Ø£Ù„ÙˆÙ'ØŸ", options: ["Ù£Ù Ù ", "Ù¡Ù£Ù Ù ", "Ù£Ù¡Ù Ù ", "Ù¡Ù Ù£Ù "], correct: 2 }
        ]
      },
      algebra: {
        Ù…Ø¨ØªØ¯Ø¦: [
          { q: "ØªÙ†Ù…Ùˆ Ù†Ø¨ØªØ© ÙƒÙ„ ÙŠÙˆÙ… Ø¨Ù…Ù‚Ø¯Ø§Ø± Ù¢ Ø³Ù…. Ø¥Ø°Ø§ ÙƒØ§Ù† Ø·ÙˆÙ„Ù‡Ø§ Ø§Ù„ÙŠÙˆÙ… Ù¨ Ø³Ù…ØŒ ÙÙƒÙ… Ø³ÙŠÙƒÙˆÙ† Ø·ÙˆÙ„Ù‡Ø§ ØºØ¯Ø§Ù‹ØŸ", options: ["Ù© Ø³Ù…", "Ù¡Ù  Ø³Ù…", "Ù¡Ù¡ Ø³Ù…", "Ù¡Ù¢ Ø³Ù…"], correct: 1 },
          { q: "Ù‚Ø§Ù„Øª Ø³Ø§Ø±Ø©: (Ù¥ Ø²Ø§Ø¦Ø¯ Ø¹Ø¯Ø¯ Ù…Ø§ ÙŠØ³Ø§ÙˆÙŠ Ù¡Ù¢). Ù…Ø§ Ù‡Ùˆ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø¯Ø¯ØŸ", options: ["Ù¦", "Ù§", "Ù¨", "Ù©"], correct: 1 }
        ],
        Ù…ØªÙˆØ³Ø·: [
          { q: "Ø£ÙŠ Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„Ø¬Ù…Ù„ ØªØ¹Ø¨Ø± Ø¹Ù† Ø£Ù† ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙÙŠ Ø§Ù„Ø¬Ù…Ø¹ Ù„Ø§ ÙŠØºÙŠØ± Ø§Ù„Ù†Ø§ØªØ¬ØŸ", options: ["Ù£ + Ù¥ = Ù¨", "Ù£ + Ù¥ = Ù¥ + Ù£", "Ù£ Ã— Ù¥ = Ù¡Ù¥", "Ù¥ - Ù£ = Ù¢"], correct: 1 },
          { q: "Ù„Ø¯Ù‰ Ø¹Ù…Ø± Ù£ Ø£ÙƒÙŠØ§Ø³ØŒ ÙÙŠ ÙƒÙ„ ÙƒÙŠØ³ Ù¦ ØªÙØ§Ø­Ø§Øª. Ø£ÙŠ Ø¬Ù…Ù„Ø© Ø¶Ø±Ø¨ ØªÙ…Ø«Ù„ Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ØªÙØ§Ø­ØŸ", options: ["Ù¦ Ã— Ù£", "Ù¦ + Ù£", "Ù¦ Ã· Ù£", "Ù£ + Ù£"], correct: 0 }
        ],
        Ù…ØªÙ‚Ø¯Ù…: [
          { q: "Ø¥Ø°Ø§ Ø·Ø±Ø­Ù†Ø§ Ù¥ Ù…Ù† Ø¹Ø¯Ø¯ Ù…Ø§ØŒ ÙƒØ§Ù† Ø§Ù„Ù†Ø§ØªØ¬ Ù¡Ù . Ù…Ø§ Ù‡Ùˆ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø¯Ø¯ØŸ", options: ["Ù¥", "Ù¡Ù ", "Ù¡Ù¥", "Ù¢Ù "], correct: 2 },
          { q: "Ø¨Ø¯Ø£Øª Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ØªÙ†Ù‚Øµ Ø¨Ø§Ù†ØªØ¸Ø§Ù…: Ù¢Ù ØŒ Ù¡Ù§ØŒ Ù¡Ù¤.. Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„ØªÙŠ ØªØªØ¨Ø¹Ù‡Ø§ Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…ØŸ", options: ["Ø²ÙŠØ§Ø¯Ø© Ù£", "Ø·Ø±Ø­ Ù£", "Ø²ÙŠØ§Ø¯Ø© Ù¢", "Ø·Ø±Ø­ Ù¢"], correct: 1 }
        ]
      },
      geometry: {
        Ù…Ø¨ØªØ¯Ø¦: [
          { q: "Ø§Ù†Ø¸Ø± Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø«Ù„Ø«. ÙƒÙ… Ø±Ø£Ø³Ø§Ù‹ (Ø²Ø§ÙˆÙŠØ©) ØªØ³ØªØ·ÙŠØ¹ Ø£Ù† ØªØ¹Ø¯ Ù„Ù‡ØŸ", options: ["Ù¢", "Ù£", "Ù¤", "Ù¥"], correct: 1 },
          { q: "Ø£Ù†Ø§ Ø´ÙƒÙ„ Ù„ÙŠ Ù¤ Ø£Ø¶Ù„Ø§Ø¹ Ù…ØªØ³Ø§ÙˆÙŠØ© ØªÙ…Ø§Ù…Ø§Ù‹ Ùˆ Ù¤ Ø²ÙˆØ§ÙŠØ§ Ù‚Ø§Ø¦Ù…Ø©. Ù…Ù† Ø£Ù†Ø§ØŸ", options: ["Ø§Ù„Ù…Ø«Ù„Ø«", "Ø§Ù„Ù…Ø±Ø¨Ø¹", "Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©", "Ø§Ù„Ù…Ø³ØªØ·ÙŠÙ„"], correct: 1 }
        ],
        Ù…ØªÙˆØ³Ø·: [
          { q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø£Ù†Ø³Ø¨ Ù„Ù‚ÙŠØ§Ø³ Ø·ÙˆÙ„ 'Ø¯ÙØªØ± Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª' Ø§Ù„ØµØºÙŠØ±ØŸ", options: ["Ø§Ù„Ù…ØªÙ€Ø±", "Ø§Ù„Ø³Ù†ØªÙŠÙ…ØªØ±", "Ø§Ù„ÙƒÙŠÙ„ÙˆÙ…ØªØ±", "Ø§Ù„Ù„ØªØ±"], correct: 1 },
          { q: "Ø¨Ù†Ù‰ ÙÙ‡Ø¯ Ø³ÙˆØ±Ø§Ù‹ Ø­ÙˆÙ„ Ø­Ø¯ÙŠÙ‚Ø© Ù…Ø±Ø¨Ø¹Ø© Ø·ÙˆÙ„ Ø¶Ù„Ø¹Ù‡Ø§ Ù£ Ø£Ù…ØªØ§Ø±. ÙƒÙ… Ø·ÙˆÙ„ Ø§Ù„Ø³ÙˆØ± ÙƒØ§Ù…Ù„Ø§Ù‹ (Ø§Ù„Ù…Ø­ÙŠØ·)ØŸ", options: ["Ù¦ Ø£Ù…ØªØ§Ø±", "Ù© Ø£Ù…ØªØ§Ø±", "Ù¡Ù¢ Ù…ØªØ±Ø§Ù‹", "Ù¡Ù¥ Ù…ØªØ±Ø§Ù‹"], correct: 2 }
        ],
        Ù…ØªÙ‚Ø¯Ù…: [
          { q: "Ø´ÙŠØ¡ Ù†Ù„Ø¹Ø¨ Ø¨Ù‡ØŒ Ù„ÙŠØ³ Ù„Ù‡ Ø£ÙˆØ¬Ù‡ ÙˆÙ„Ø§ Ø±Ø¤ÙˆØ³ ÙˆÙ„Ø§ Ø­ÙˆØ§Ù ÙˆÙŠØ´Ø¨Ù‡ Ø§Ù„Ø£Ø±Ø¶ Ø§Ù„ØªÙŠ Ù†Ø¹ÙŠØ´ Ø¹Ù„ÙŠÙ‡Ø§. Ù…Ø§ Ù‡ÙˆØŸ", options: ["Ø§Ù„Ù…ÙƒØ¹Ø¨", "Ø§Ù„Ø£Ø³Ø·ÙˆØ§Ù†Ø©", "Ø§Ù„ÙƒØ±Ø©", "Ø§Ù„Ù…Ø®Ø±ÙˆØ·"], correct: 2 },
          { q: "Ø¨Ø¯Ø£Øª Ø­ØµØ© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„Ø³Ø§Ø¹Ø© Ù¨:Ù Ù  ØµØ¨Ø§Ø­Ø§Ù‹ ÙˆØ§Ù†ØªÙ‡Øª Ø§Ù„Ø³Ø§Ø¹Ø© Ù¨:Ù¤Ù¥ ØµØ¨Ø§Ø­Ø§Ù‹. ÙƒÙ… Ø¯Ù‚ÙŠÙ‚Ø© Ø§Ø³ØªØºØ±Ù‚Øª Ø§Ù„Ø­ØµØ©ØŸ", options: ["Ù£Ù  Ø¯Ù‚ÙŠÙ‚Ø©", "Ù¤Ù  Ø¯Ù‚ÙŠÙ‚Ø©", "Ù¤Ù¥ Ø¯Ù‚ÙŠÙ‚Ø©", "Ù¦Ù  Ø¯Ù‚ÙŠÙ‚Ø©"], correct: 2 }
        ]
      },
      stats: {
        Ù…Ø¨ØªØ¯Ø¦: [
          { q: "ÙÙŠ ÙƒÙŠØ³ Ù¥ ÙƒØ±Ø§Øª Ø­Ù…Ø±Ø§Ø¡ ÙÙ‚Ø·. Ù…Ø§ Ø§Ø­ØªÙ…Ø§Ù„ Ø³Ø­Ø¨ ÙƒØ±Ø© 'Ø®Ø¶Ø±Ø§Ø¡'ØŸ", options: ["Ø£ÙƒÙŠØ¯", "Ù…Ù…ÙƒÙ†", "Ù…Ø³ØªØ­ÙŠÙ„", "Ù…ØªØ³Ø§ÙˆÙŠ Ø§Ù„Ø¥Ù…ÙƒØ§Ù†ÙŠØ©"], correct: 2 },
          { q: "Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ÙŠÙˆÙ… Ù‡Ùˆ Ø§Ù„Ø®Ù…ÙŠØ³ØŒ ÙÙ…Ø§ Ø§Ø­ØªÙ…Ø§Ù„ Ø£Ù† ÙŠÙƒÙˆÙ† ØºØ¯Ø§Ù‹ Ù‡Ùˆ Ø§Ù„Ø¬Ù…Ø¹Ø©ØŸ", options: ["Ø£ÙƒÙŠØ¯", "Ù…Ù…ÙƒÙ†", "Ù…Ø³ØªØ­ÙŠÙ„", "Ø¶Ø¹ÙŠÙ"], correct: 0 }
        ],
        Ù…ØªÙˆØ³Ø·: [
          { q: "ØªÙ…Ø«ÙŠÙ„ Ø¨Ø§Ù„Ø±Ù…ÙˆØ² ÙŠØ¸Ù‡Ø± Ø£Ù† ÙƒÙ„ (Ù†Ø¬Ù…Ø©) ØªØ³Ø§ÙˆÙŠ ÙƒØªØ§Ø¨ÙŠÙ†. Ø¥Ø°Ø§ Ø±Ø£ÙŠØª Ù£ Ù†Ø¬Ù…Ø§ØªØŒ ÙÙƒÙ… ÙƒØªØ§Ø¨Ø§Ù‹ Ù„Ø¯ÙŠØŸ", options: ["Ù£ ÙƒØªØ¨", "Ù¥ ÙƒØªØ¨", "Ù¦ ÙƒØªØ¨", "Ù© ÙƒØªØ¨"], correct: 2 },
          { q: "ÙÙŠ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¥Ø´Ø§Ø±Ø§ØªØŒ ÙˆØ¬Ø¯Ù†Ø§ Ù¥ Ø¥Ø´Ø§Ø±Ø§Øª Ø¨Ø¬Ø§Ù†Ø¨ 'Ø§Ù„Ù…ÙˆØ²'. Ø£ÙŠ Ø±Ù‚Ù… ÙŠÙ…Ø«Ù„ Ø§Ù„Ù…ÙˆØ²ØŸ", options: ["Ù£", "Ù¤", "Ù¥", "Ù¡Ù "], correct: 2 }
        ],
        Ù…ØªÙ‚Ø¯Ù…: [
          { q: "ÙƒÙŠØ³ ÙÙŠÙ‡ ÙƒØ±Ø© Ø²Ø±Ù‚Ø§Ø¡ ÙˆÙƒØ±Ø© Ø­Ù…Ø±Ø§Ø¡. Ø³Ø­Ø¨ ÙƒØ±Ø© Ø²Ø±Ù‚Ø§Ø¡ ÙŠØ¹ØªØ¨Ø± Ø§Ø­ØªÙ…Ø§Ù„Ø§Ù‹:", options: ["Ø£ÙƒÙŠØ¯Ø§Ù‹", "Ù…Ø³ØªØ­ÙŠÙ„Ø§Ù‹", "Ù…ØªØ³Ø§ÙˆÙŠ Ø§Ù„Ø¥Ù…ÙƒØ§Ù†ÙŠØ©", "Ø£ÙƒØ«Ø± Ø§Ø­ØªÙ…Ø§Ù„Ø§Ù‹"], correct: 2 },
          { q: "Ø³Ø£Ù„ Ø®Ø§Ù„Ø¯ Ø£ØµØ­Ø§Ø¨Ù‡ Ø¹Ù† ÙØ§ÙƒÙ‡ØªÙ‡Ù… Ø§Ù„Ù…ÙØ¶Ù„Ø© Ù„ÙŠØ¬Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª. Ù…Ø§Ø°Ø§ ÙŠØ³Ù…Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…Ù„ØŸ", options: ["ØªÙ…Ø«ÙŠÙ„", "Ù…Ø³Ø­ (Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª)", "Ø§Ø­ØªÙ…Ø§Ù„", "Ù†Ù…Ø·"], correct: 1 }
        ]
      }
    };

    const domainNames = { numbers: "Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ ÙˆØ§Ù„Ø¹Ù…Ù„ÙŠØ§Øª", algebra: "Ø§Ù„Ø¬Ø¨Ø± ÙˆØ§Ù„Ø£Ù†Ù…Ø§Ø·", geometry: "Ø§Ù„Ù‡Ù†Ø¯Ø³Ø© ÙˆØ§Ù„Ù‚ÙŠØ§Ø³", stats: "Ø§Ù„Ø¥Ø­ØµØ§Ø¡ ÙˆØ§Ù„Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª" };
    let currentStudent = null;
    let allStudents = JSON.parse(localStorage.getItem('students_data') || '[]');
    let currentQuiz = null;
    let userAnswers = {};

    function init() {
      let visits = parseInt(localStorage.getItem('visitCount') || '0') + 1;
      localStorage.setItem('visitCount', visits);
      document.getElementById('visitCount').textContent = visits;
      updateLeaderboard();
      updateStats();
    }

    function updateStats() {
      const totalStars = allStudents.reduce((sum, s) => sum + Math.floor(s.total_score / 2), 0);
      document.getElementById('totalStars').textContent = totalStars;
      if (allStudents.length > 0) {
        document.getElementById('lastVisitor').textContent = allStudents[0].student_name;
      }
    }

    function updateLeaderboard() {
      const container = document.getElementById('allStudentsRanking');
      const sorted = [...allStudents].sort((a,b) => b.total_score - a.total_score);
      if (sorted.length === 0) return;
      container.innerHTML = sorted.slice(0, 10).map((s, i) => `
        <div class="ranking-item slide-in">
          <span class="w-8 h-8 flex items-center justify-center bg-purple-100 rounded-full text-purple-700 font-black ml-3">${i + 1}</span>
          <div class="flex-1">
            <p class="font-bold text-gray-800">${s.student_name}</p>
            <p class="text-[10px] text-gray-500">${s.total_score} Ù†Ù‚Ø·Ø©</p>
          </div>
          <div class="text-yellow-500">${'â­'.repeat(Math.min(5, Math.ceil(s.total_score / 5)))}</div>
        </div>
      `).join('');
    }

    document.getElementById('btnStartQuiz').addEventListener('click', () => {
      const name = document.getElementById('studentNameInput').value.trim();
      if (!name) return alert('Ø¨Ø·Ù„Ù†Ø§.. ÙØ¶Ù„Ø§Ù‹ Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ!');
      currentStudent = name;
      document.getElementById('btnStartQuiz').closest('div').parentElement.classList.add('hidden');
      document.getElementById('quizSelection').classList.remove('hidden');
    });

    document.querySelectorAll('.quizBtn').forEach(btn => {
      btn.addEventListener('click', () => {
        renderQuiz(btn.dataset.domain, btn.dataset.level);
      });
    });

    function renderQuiz(domain, level) {
      currentQuiz = { domain, level };
      userAnswers = {};
      document.getElementById('homeScreen').classList.add('hidden');
      document.getElementById('quizScreen').classList.remove('hidden');
      document.getElementById('quizTitle').textContent = `${domainNames[domain]} (${level})`;
      const quizData = questions[domain][level];
      document.getElementById('questionsContainer').innerHTML = quizData.map((q, i) => `
        <div class="bg-white p-5 rounded-2xl shadow-sm border-2 border-purple-50">
          <p class="font-black text-purple-900 mb-4">${i+1}. ${q.q}</p>
          <div class="grid grid-cols-1 gap-2">
            ${q.options.map((opt, oi) => `
              <label class="flex items-center p-3 rounded-xl border-2 border-gray-100 option-hover cursor-pointer transition-all">
                <input type="radio" name="q${i}" value="${oi}" class="w-5 h-5 accent-pink-500" onchange="userAnswers[${i}]=${oi}">
                <span class="mr-3 font-bold text-gray-700">${opt}</span>
              </label>
            `).join('')}
          </div>
        </div>
      `).join('');
    }

    document.getElementById('btnSubmitQuiz').addEventListener('click', () => {
      const quizData = questions[currentQuiz.domain][currentQuiz.level];
      if (Object.keys(userAnswers).length < quizData.length) return alert('ØªÙ†Ø¨ÙŠÙ‡: Ù„Ù… ØªØ­Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©!');
      let score = 0;
      quizData.forEach((q, i) => { if (userAnswers[i] === q.correct) score++; });
      
      let existingIndex = allStudents.findIndex(s => s.student_name === currentStudent);
      if (existingIndex > -1) {
        allStudents[existingIndex].total_score += score;
      } else {
        allStudents.push({ student_name: currentStudent, total_score: score });
      }
      localStorage.setItem('students_data', JSON.stringify(allStudents));
      
      document.getElementById('quizScreen').classList.add('hidden');
      document.getElementById('resultsScreen').classList.remove('hidden');
      document.getElementById('resultName').textContent = currentStudent;
      document.getElementById('scoreDisplay').textContent = `${score} / ${quizData.length}`;
      document.getElementById('starsDisplay').innerHTML = 'â­'.repeat(Math.max(1, Math.ceil(score/1.5)));
      updateLeaderboard();
      updateStats();
    });

    document.getElementById('btnTakeAnother').addEventListener('click', () => {
      document.getElementById('resultsScreen').classList.add('hidden');
      document.getElementById('quizSelection').classList.remove('hidden');
      document.getElementById('homeScreen').classList.remove('hidden');
    });

    document.getElementById('btnBackHome').addEventListener('click', () => location.reload());
    document.getElementById('btnBackToSelection').addEventListener('click', () => {
        document.getElementById('quizScreen').classList.add('hidden');
        document.getElementById('homeScreen').classList.remove('hidden');
    });

    init();
  </script>
 </body>
</html>